<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Obtain the IMMUcan_2022_CancerExample dataset — IMMUcan_2022_CancerExample • imcdatasets</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Obtain the IMMUcan_2022_CancerExample dataset — IMMUcan_2022_CancerExample"><meta property="og:description" content="Obtain the IMMUcan_2022_CancerExample dataset, which consists of three data 
objects: single cell data, multichannel images and cell segmentation masks. 
Data were obtained by imaging mass cytometry (IMC) of sections of 4 patients
with different tumor indications."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">imcdatasets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/imcdatasets.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Guidelines_Contribution_Dataset-formatting.html">Contribution guidelines and dataset format</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/BodenmillerGroup/imcdatasets/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Obtain the IMMUcan_2022_CancerExample dataset</h1>
    <small class="dont-index">Source: <a href="https://github.com/BodenmillerGroup/imcdatasets/blob/HEAD/R/IMMUcan_2022_CancerExample.R" class="external-link"><code>R/IMMUcan_2022_CancerExample.R</code></a></small>
    <div class="hidden name"><code>IMMUcan_2022_CancerExample.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Obtain the IMMUcan_2022_CancerExample dataset, which consists of three data 
objects: single cell data, multichannel images and cell segmentation masks. 
Data were obtained by imaging mass cytometry (IMC) of sections of 4 patients
with different tumor indications.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">IMMUcan_2022_CancerExample</span><span class="op">(</span></span>
<span>  data_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sce"</span>, <span class="st">"spe"</span>, <span class="st">"images"</span>, <span class="st">"masks"</span><span class="op">)</span>,</span>
<span>  version <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  metadata <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  on_disk <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  h5FilesPath <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data_type</dt>
<dd><p>type of object to load, `images` for multichannel images or
`masks` for cell segmentation masks. Single cell data are retrieved using 
either `sce` for the <code>SingleCellExperiment</code> format or `spe` for the  
<code>SpatialExperiment</code> format.</p></dd>


<dt>version</dt>
<dd><p>dataset version. By default, the latest version is returned.</p></dd>


<dt>metadata</dt>
<dd><p>if FALSE (default), the data object selected in
<code>data_type</code> is returned. If TRUE, only the metadata associated to this
object is returned.</p></dd>


<dt>on_disk</dt>
<dd><p>logical indicating if images in form of 
<a href="https://rdrr.io/pkg/HDF5Array/man/HDF5Array-class.html" class="external-link">HDF5Array</a> objects (as .h5 files) should be stored on disk 
rather than in memory. This setting is valid when downloading <code>images</code> 
and <code>masks</code>.</p></dd>


<dt>h5FilesPath</dt>
<dd><p>path to where the .h5 files for on disk representation 
are stored. This path needs to be defined when <code>on_disk = TRUE</code>. When 
files should only temporarily be stored on disk, please set 
<code>h5FilesPath = getHDF5DumpDir()</code>.</p></dd>


<dt>force</dt>
<dd><p>logical indicating if images should be overwritten when files
with the same name already exist on disk.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a> object with single cell data, a
<a href="https://rdrr.io/pkg/cytomapper/man/CytoImageList.html" class="external-link">CytoImageList</a> object containing multichannel images, or a
<a href="https://rdrr.io/pkg/cytomapper/man/CytoImageList.html" class="external-link">CytoImageList</a> object containing cell segmentation masks.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This is an Imaging Mass Cytometry (IMC) dataset used in the
<a href="https://bodenmillergroup.github.io/IMCDataAnalysis/" class="external-link">IMC data analysis
book</a></p><ul><li><p><code>images</code> contains 14 multichannel images, each
containing 50 channels, in the form of a <a href="https://rdrr.io/pkg/cytomapper/man/CytoImageList.html" class="external-link">CytoImageList</a> class
object.</p></li>
<li><p><code>masks</code> contains the cell segmentation masks associated
with the images, in the form of a <a href="https://rdrr.io/pkg/cytomapper/man/CytoImageList.html" class="external-link">CytoImageList</a> class object.</p></li>
<li><p><code>sce</code> contains the single cell data extracted from the 
multichannel images using the cell segmentation masks, as well as the 
associated metadata, in the form of a <a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a> 
object. Single cell data can also be retrieved as a 
<a href="https://rdrr.io/pkg/SpatialExperiment/man/SpatialExperiment.html" class="external-link">SpatialExperiment</a> object. This represents a total of 46,825 
cells x 40 channels.</p></li>
</ul><p>All data are downloaded from ExperimentHub and cached for local re-use.</p>
<p>Mapping between the three data objects is performed via variables located in
their metadata columns: <code>mcols()</code> for the <a href="https://rdrr.io/pkg/cytomapper/man/CytoImageList.html" class="external-link">CytoImageList</a>
objects and <code>ColData()</code> for the <a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a>
object. Mapping at the image level can be performed with the 
<code>sample_id</code> or <code>image_name</code> variables. Mapping between cell 
segmentation masks and single cell data is performed with the 
<code>cell_number</code> variable, the values of which correspond to the 
intensity values of the <code>masks</code> object. For practical examples, please 
refer to the "Accessing IMC datasets" vignette.</p>
<p>This imaging mass cytometry dataset serves as an example to demonstrate
downstream analysis tools including spatial data analysis. The data was
generated as part of the Integrated iMMUnoprofiling of large adaptive CANcer
patient cohorts (IMMUcan) project (<a href="immucan.eu">immucan.eu</a>) using the
Hyperion imaging system.</p>
<p>Relevant entries to the <code>colData</code> slot are as follows:</p>
<ul><li><p><code>sample_id</code> image name.</p></li>
<li><p><code>cell_number</code> cell identifier.</p></li>
<li><p><code>width_px</code> width of the image.</p></li>
<li><p><code>height_px</code> height of the image.</p></li>
<li><p><code>patient_id</code> patient identifier.</p></li>
<li><p><code>ROI</code> region of interest identifier.</p></li>
<li><p><code>indication</code> cancer type.</p></li>
<li><p><code>cell_labels</code> labels of manually labelled cells.</p></li>
<li><p><code>cell_type</code> cell type as defined by classification.</p></li>
<li><p><code>spatial_community</code> identifiers of each spatial tumor or 
  non-tumor community</p></li>
<li><p><code>cn_celltypes</code> cellular neighborhoods as defined by 
  clustering cells based on the frequency of neighboring cell types.</p></li>
<li><p><code>cn_expression</code> cellular neighborhoods as defined by 
  clustering cells based on the mean expression of neighboring cells</p></li>
<li><p><code>lisa_clusters</code> cellular neighborhoods as detected by the 
  lisaClust package.</p></li>
<li><p><code>spatial_context</code> spatial contexts defined in 
  <code>cn_celltype</code>.</p></li>
<li><p><code>spatial_context_filtered</code> filtered spatial context 
  identifiers.</p></li>
<li><p><code>patch_id</code> identifier of the spatial tumor patch.</p></li>
<li><p><code>cell_x</code> spatial x coordinate.</p></li>
<li><p><code>cell_y</code> spatial y coordinate.</p></li>
</ul><p>The marker-associated metadata, including antibody information and metal 
tags are stored in the <code>rowData</code> of the 
<a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a> object.</p>
<p>The <code>assay</code> slot of the <a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a> object
contains two assays:</p>
<ul><li><p><code>counts</code>: mean ion counts per cell</p></li>
<li><p><code>exprs</code>: arsinh-transformed counts per cell, with cofactor 1.</p></li>
</ul><p>The <code>colPair</code> slot of the <a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a> object
contains the following spatial object graphs:</p>
<ul><li><p><code>neighborhood</code> steinbock generated graph.</p></li>
<li><p><code>knn_interaction_graph</code> 20-nearest neighbor graph.</p></li>
<li><p><code>expansion_interaction_graph</code> expansion graph using a threshold
  of 20.</p></li>
<li><p><code>delaunay_interaction_graph</code> interaction graph constructed by 
  delaunay triangulation.</p></li>
<li><p><code>knn_spatialcontext_graph</code> 40-nearest neighbor graph.</p></li>
</ul><p>File sizes:</p><ul><li><p><code>`images`</code>: size in memory = 1.5 Gb,  size on disk = 786 Mb.</p></li>
<li><p><code>`masks`</code>: size in memory = 19 Mb,  size on disk = 1.2 Mb.</p></li>
<li><p><code>`sce`</code>: size in memory = 182 Mb, size on disk = 82 Mb.</p></li>
<li><p><code>`spe`</code>: size in memory = 183 Mb, size on disk = 81 Mb.</p></li>
</ul><p>When storing images on disk, these need to be first fully read into memory
before writing them to disk. This means the process of downloading the data 
is slower than directly keeping them in memory. However, downstream analysis
will lose its memory overhead when storing images on disk.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Nils Eling</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load single cell data</span></span></span>
<span class="r-in"><span><span class="va">sce</span> <span class="op">&lt;-</span> <span class="fu">IMMUcan_2022_CancerExample</span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"sce"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> snapshotDate(): 2023-02-14</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> see ?imcdatasets and browseVignettes('imcdatasets') for documentation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> loading from cache</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sce</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class: SingleCellExperiment </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dim: 40 47794 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> metadata(5): color_vectors cluster_codes SOM_codes delta_area</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   filterSpatialContext</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> assays(2): counts exprs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rownames(40): MPO H3 ... DNA1 DNA2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rowData names(17): channel metal ... ilastik deepcell</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> colnames(47794): 1_1 1_2 ... 14_2844 14_2845</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> colData names(43): sample_id ObjectNumber ... cell_x cell_y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> reducedDimNames(8): UMAP TSNE ... seurat UMAP_seurat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mainExpName: IMMUcan_2022_CancerExample_v1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> altExpNames(0):</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Display metadata</span></span></span>
<span class="r-in"><span><span class="fu">IMMUcan_2022_CancerExample</span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"sce"</span>, metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> snapshotDate(): 2023-02-14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ExperimentHub with 1 record</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # snapshotDate(): 2023-02-14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # names(): EH7842</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # package(): imcdatasets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $dataprovider: University of Zurich</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $species: Homo sapiens</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $rdataclass: SingleCellExperiment</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $rdatadateadded: 2023-01-30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $title: IMMUcan_2022_CancerExample - sce - v1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $description: Single cell data for the IMMUcan_2022_CancerExample IMC dataset</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $taxonomyid: 9606</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $genome: NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $sourcetype: Zip</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $sourceurl: https://zenodo.org/record/6810879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $sourcesize: NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # $tags: c("Homo_sapiens_Data", "ImmunoOncologyData",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #   "ReproducibleResearch", "SingleCellData", "SpatialData",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #   "TechnologyData", "Tissue") </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> # retrieve record with 'object[["EH7842"]]' </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load masks on disk</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bioconductor.org/packages/HDF5Array" class="external-link">HDF5Array</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">masks</span> <span class="op">&lt;-</span> <span class="fu">IMMUcan_2022_CancerExample</span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"masks"</span>, on_disk <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>h5FilesPath <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/HDF5Array/man/dump-management.html" class="external-link">getHDF5DumpDir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> snapshotDate(): 2023-02-14</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> see ?imcdatasets and browseVignettes('imcdatasets') for documentation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> loading from cache</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">masks</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CytoImageList containing 6 image(s)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> names(6): Patient1_001 Patient1_002 Patient1_003 Patient2_001 Patient2_002 Patient2_003 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Each image contains 1 channel</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nicolas Damond.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

