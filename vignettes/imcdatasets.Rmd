---
title: "Accessing IMC datasets"
date: "Created: Nov 02, 2020; Compiled: `r BiocStyle::doc_date()`"
package: "`r BiocStyle::pkg_ver('imcdatasets')`"
author:
- name: Nicolas Damond
  affiliation: Department for Quantitative Biomedicine, University of Zurich
  email: nicolas.damond@dqbm.uzh.ch
- name: Nils Eling
  affiliation: Department for Quantitative Biomedicine, University of Zurich
  email: nils.eling@dqbm.uzh.ch
output:
    BiocStyle::html_document:
        toc_float: yes
bibliography: "`r system.file('scripts', 'ref.bib', package='imcdatasets')`"
vignette: >
    %\VignetteIndexEntry{"Accessing IMC datasets"}
    %\VignetteEngine{knitr::rmarkdown}
    %\VignetteEncoding{UTF-8}
---

```{r style, echo=FALSE}
knitr::opts_chunk$set(error=FALSE, warning=FALSE, message=FALSE)
library(BiocStyle)
```

```{r library, echo=FALSE}
library(cytomapper)
library(SingleCellExperiment)
library(imcdatasets)
```

# Introduction

The `r Biocpkg("imcdatasets")` package provides access to publicly available
datasets generated using imaging mass cytometry (IMC) @giesen2014imc.

Each dataset is composed of:
* Single-cell data in the form of a `SingleCellExperiment` object (named 
`XYZ_sce.rds`).
* Multichannel images in the form of a `CytoImageList` object (named 
`XYZ_images.rds`).
* Cell masks in the form of a `CytoImageList` object (named `XYZ_masks.rds`).
Here, `XYZ` refers to the name of the dataset.

Please refer to the `r Biocpkg("SingleCellExperiment")` and `r
Biocpkg("cytomapper")` documentation for further information on how to work with
`SingleCellExperiment` and `CytoImageList` objects.

Users can import the datasets by calling a single function. The following
examples highlight accessing the dataset provided by _Damond, N. et al., A Map
of Human Type 1 Diabetes Progression by Imaging Mass Cytometry_
@damond2019pancreas

Import single-cell expression and metadata:

```{r import-dataset}
sce <- DamondPancreas2019Data(data_type = "sce")
sce
```

Import multichannel images:

```{r import-images}
images <- DamondPancreas2019Data(data_type = "images")
images
```

Import cell segmentation masks:

```{r import-masks}
masks <- DamondPancreas2019Data(data_type = "masks")
masks
```

# Available datasets

The `listDatasets()` function returns all available datasets in 
`imcdatasets`, along with associated information and the R function
call to load them.

```{r list-datasets}
datasets <- listDatasets()
datasets <- as.data.frame(datasets)
datasets$FunctionCall <- sprintf("`%s`", datasets$FunctionCall)
knitr::kable(datasets)
```

# Accessing the metadata

Data files can also be individually accessed by name. The associated metadata can be displayed as follows:

```{r access-metadata}
DamondPancreas2019_sce(metadata = TRUE)
DamondPancreas2019_images(metadata = TRUE)
DamondPancreas2019_masks(metadata = TRUE)
```

# Session info {.unnumbered}

```{r sessionInfo, echo=FALSE}
sessionInfo()
```

# References