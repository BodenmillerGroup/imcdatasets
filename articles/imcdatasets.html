<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing IMC datasets • imcdatasets</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing IMC datasets">
<meta property="og:description" content="imcdatasets">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">imcdatasets</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/imcdatasets.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Guidelines_Contribution_Dataset-formatting.html">Contribution guidelines and dataset format</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/BodenmillerGroup/imcdatasets/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing IMC datasets</h1>
                        <h4 data-toc-skip class="author">Nicolas
Damond</h4>
            <address class="author_afil">
      Department for Quantitative Biomedicine; University of
ZurichInstitute of Molecular Health Sciences; ETH
Zurich<br><a class="author_email" href="mailto:#"></a><a href="mailto:nicolas.damond@dqbm.uzh.ch" class="email">nicolas.damond@dqbm.uzh.ch</a>
      </address>
                              <h4 data-toc-skip class="author">Nils
Eling</h4>
            <address class="author_afil">
      Department for Quantitative Biomedicine; University of
ZurichInstitute of Molecular Health Sciences; ETH
Zurich<br><a class="author_email" href="mailto:#"></a><a href="mailto:nils.eling@dqbm.uzh.ch" class="email">nils.eling@dqbm.uzh.ch</a>
      </address>
                  
            <h4 data-toc-skip class="date">Created: 02 November 2020;
Compiled: 25 February 2023</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/BodenmillerGroup/imcdatasets/blob/HEAD/vignettes/imcdatasets.Rmd" class="external-link"><code>vignettes/imcdatasets.Rmd</code></a></small>
      <div class="hidden name"><code>imcdatasets.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <em><a href="https://bioconductor.org/packages/3.17/imcdatasets" class="external-link">imcdatasets</a></em>
package provides access to publicly available datasets generated using
imaging mass cytometry (IMC) <span class="citation">(Giesen et al.
2014)</span>.</p>
<p>IMC is a technology that enables measurement of up to 50 markers from
tissue sections at a resolution of 1 <span class="math inline">\(\mu
m\)</span> <span class="citation">Giesen et al. (2014)</span>. In
classical processing pipelines, such as the <a href="https://github.com/BodenmillerGroup/ImcSegmentationPipeline" class="external-link">ImcSegmentationPipeline</a>
or <a href="https://bodenmillergroup.github.io/steinbock/latest/" class="external-link">steinbock</a>,
the multichannel images are segmented to generate cells masks. These
masks are then used to extract single cell features from the
multichannel images.</p>
<p>Each dataset in <code>imcdatasets</code> is composed of three
elements that can be retrieved separately:<br>
1. Single-cell data in the form of a <code>SingleCellExperiment</code>
or <code>SpatialExperiment</code> class object (named
<code>sce.rds</code>).<br>
2. Multichannel images in the form of a <code>CytoImageList</code> class
object (named <code>images.rds</code>).<br>
3. Cell segmentation masks in the form of a <code>CytoImageList</code>
class object (named <code>masks.rds</code>).</p>
</div>
<div class="section level2">
<h2 id="available-datasets">Available datasets<a class="anchor" aria-label="anchor" href="#available-datasets"></a>
</h2>
<p>The <code><a href="../reference/listDatasets.html">listDatasets()</a></code> function returns all available
datasets in <code>imcdatasets</code>, along with associated information.
The <code>FunctionCall</code> column gives the name of the R function
that enables to load the dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/listDatasets.html">listDatasets</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span></span>
<span><span class="va">datasets</span><span class="op">$</span><span class="va">FunctionCall</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"`%s`"</span>, <span class="va">datasets</span><span class="op">$</span><span class="va">FunctionCall</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="25%">
<col width="5%">
<col width="14%">
<col width="9%">
<col width="10%">
<col width="11%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="left">FunctionCall</th>
<th align="left">Species</th>
<th align="left">Tissue</th>
<th align="right">NumberOfCells</th>
<th align="right">NumberOfImages</th>
<th align="right">NumberOfChannels</th>
<th align="left">Reference</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code><a href="../reference/Damond_2019_Pancreas.html">Damond_2019_Pancreas()</a></code></td>
<td align="left">Human</td>
<td align="left">Pancreas</td>
<td align="right">252059</td>
<td align="right">100</td>
<td align="right">38</td>
<td align="left"><span class="citation">Damond et al. (2019)</span></td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/JacksonFischer_2020_BreastCancer.html">JacksonFischer_2020_BreastCancer()</a></code></td>
<td align="left">Human</td>
<td align="left">Primary breast tumour</td>
<td align="right">285851</td>
<td align="right">100</td>
<td align="right">42</td>
<td align="left"><span class="citation">Jackson et al.
(2020)</span></td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/Zanotelli_2020_Spheroids.html">Zanotelli_2020_Spheroids()</a></code></td>
<td align="left">Human</td>
<td align="left">Cell line spheroids</td>
<td align="right">229047</td>
<td align="right">517</td>
<td align="right">51</td>
<td align="left"><span class="citation">Zanotelli et al.
(2020)</span></td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample()</a></code></td>
<td align="left">Human</td>
<td align="left">Primary tumor</td>
<td align="right">46825</td>
<td align="right">14</td>
<td align="right">40</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="retrieving-data">Retrieving data<a class="anchor" aria-label="anchor" href="#retrieving-data"></a>
</h2>
<p>Users can import the datasets by calling a single function and
specifying the type of data to retrieve. The following examples
highlight accessing an example dataset linked to the <a href="https://immucan.eu/" class="external-link">IMMUcan</a> project.</p>
<p><strong>Importing single-cell expression data and
metadata</strong></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sce</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span><span class="st">"sce"</span><span class="op">)</span></span>
<span><span class="va">sce</span></span></code></pre></div>
<pre><code><span><span class="co">## class: SingleCellExperiment </span></span>
<span><span class="co">## dim: 40 47794 </span></span>
<span><span class="co">## metadata(5): color_vectors cluster_codes SOM_codes delta_area</span></span>
<span><span class="co">##   filterSpatialContext</span></span>
<span><span class="co">## assays(2): counts exprs</span></span>
<span><span class="co">## rownames(40): MPO H3 ... DNA1 DNA2</span></span>
<span><span class="co">## rowData names(17): channel metal ... ilastik deepcell</span></span>
<span><span class="co">## colnames(47794): 1_1 1_2 ... 14_2844 14_2845</span></span>
<span><span class="co">## colData names(43): sample_id ObjectNumber ... cell_x cell_y</span></span>
<span><span class="co">## reducedDimNames(8): UMAP TSNE ... seurat UMAP_seurat</span></span>
<span><span class="co">## mainExpName: IMMUcan_2022_CancerExample_v1</span></span>
<span><span class="co">## altExpNames(0):</span></span></code></pre>
<p><strong>Importing multichannel images</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">images</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span><span class="st">"images"</span><span class="op">)</span></span>
<span><span class="va">images</span></span></code></pre></div>
<pre><code><span><span class="co">## CytoImageList containing 14 image(s)</span></span>
<span><span class="co">## names(14): Patient1_001 Patient1_002 Patient1_003 Patient2_001 Patient2_002 Patient2_003 Patient2_004 Patient3_001 Patient3_002 Patient3_003 Patient4_005 Patient4_006 Patient4_007 Patient4_008 </span></span>
<span><span class="co">## Each image contains 40 channel(s)</span></span>
<span><span class="co">## channelNames(40): MPO H3 SMA CD16 CD38 HLA_DR CD27 CD15 CD45RA CD163 B2M CD20 CD68 IDO1 CD3e LAG3 CD11c PD_1 PDGFRB CD7 GZMB PD_L1 TCF7 CD45RO FOXP3 ICOS CD8a CA9 CD33 Ki67 VISTA CD40 CD4 CD14 CDH1 CD303 CD206 c_PARP DNA1 DNA2</span></span></code></pre>
<p><strong>Importing cell segmentation masks</strong></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">masks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span><span class="st">"masks"</span><span class="op">)</span></span>
<span><span class="va">masks</span></span></code></pre></div>
<pre><code><span><span class="co">## CytoImageList containing 14 image(s)</span></span>
<span><span class="co">## names(14): Patient1_001 Patient1_002 Patient1_003 Patient2_001 Patient2_002 Patient2_003 Patient2_004 Patient3_001 Patient3_002 Patient3_003 Patient4_005 Patient4_006 Patient4_007 Patient4_008 </span></span>
<span><span class="co">## Each image contains 1 channel</span></span></code></pre>
<p><strong>On disk storage</strong></p>
<p>Objects containing multi-channel images and segmentation masks can
furthermore be stored on disk rather than in memory. Nevertheless, they
need to be loaded into memory once before writing them to disk. This
process takes longer than keeping them in memory but reduces memory
requirements during downstream analysis.</p>
<p>To write images or masks to disk, set <code>on_disk = TRUE</code> and
specify a path where images/masks will be stored as .h5 files:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create temporary location</span></span>
<span><span class="va">cur_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">masks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"masks"</span>, on_disk <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    h5FilesPath <span class="op">=</span> <span class="va">cur_path</span><span class="op">)</span></span>
<span><span class="va">masks</span></span></code></pre></div>
<pre><code><span><span class="co">## CytoImageList containing 14 image(s)</span></span>
<span><span class="co">## names(14): Patient1_001 Patient1_002 Patient1_003 Patient2_001 Patient2_002 Patient2_003 Patient2_004 Patient3_001 Patient3_002 Patient3_003 Patient4_005 Patient4_006 Patient4_007 Patient4_008 </span></span>
<span><span class="co">## Each image contains 1 channel</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="dataset-info-and-metadata">Dataset info and metadata<a class="anchor" aria-label="anchor" href="#dataset-info-and-metadata"></a>
</h2>
<p>Additional information about each dataset is available in the help
page:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">IMMUcan_2022_CancerExample</span></span></code></pre></div>
<p>The metadata associated with a specific data object can be displayed
as follows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"sce"</span>, metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"images"</span>, metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/IMMUcan_2022_CancerExample.html">IMMUcan_2022_CancerExample</a></span><span class="op">(</span>data_type <span class="op">=</span> <span class="st">"masks"</span>, metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The <code>SingleCellExperiment</code> class objects can be used for
data analysis. For more information, please refer to the <em><a href="https://bioconductor.org/packages/3.17/SingleCellExperiment" class="external-link">SingleCellExperiment</a></em>
package and to the <a href="http://bioconductor.org/books/release/OSCA/" class="external-link">Orchestrating
Single-Cell Analysis with Bioconductor</a> workflow.</p>
<p>The <code>CytoImageList</code> class objects can be used for plotting
cell and pixel information. Some typical use cases are given below. For
more information, please see the <em><a href="https://bioconductor.org/packages/3.17/cytomapper" class="external-link">cytomapper</a></em>
package and the <a href="https://www.bioconductor.org/packages/devel/bioc/vignettes/cytomapper/inst/doc/cytomapper.html" class="external-link">associated
vignette</a>.</p>
<p><strong>Subsetting the images and masks</strong></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cur_images</span> <span class="op">&lt;-</span> <span class="va">images</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">cur_masks</span> <span class="op">&lt;-</span> <span class="va">masks</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<p><strong>Plotting pixel information</strong></p>
<p>The <code>images</code> objects can be used to display pixel-level
data.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/cytomapper/man/plotPixels.html" class="external-link">plotPixels</a></span><span class="op">(</span></span>
<span>    <span class="va">cur_images</span>,</span>
<span>    colour_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CD8a"</span>, <span class="st">"CD68"</span>, <span class="st">"CDH1"</span><span class="op">)</span>,</span>
<span>    bcg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        CD8a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>        CD68 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>        CDH1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="imcdatasets_files/figure-html/usage-pixel-1.png" width="700"></p>
<p><strong>Plotting cell information</strong></p>
<p>The <code>masks</code> and <code>sce</code> objects can be combined
to display cell-level data.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/cytomapper/man/plotCells.html" class="external-link">plotCells</a></span><span class="op">(</span></span>
<span>    <span class="va">cur_masks</span>, object <span class="op">=</span> <span class="va">sce</span>,</span>
<span>    img_id <span class="op">=</span> <span class="st">"image_number"</span>, cell_id <span class="op">=</span> <span class="st">"cell_number"</span>,</span>
<span>    colour_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CD8a"</span>, <span class="st">"CD68"</span>, <span class="st">"CDH1"</span><span class="op">)</span>,</span>
<span>    exprs_values <span class="op">=</span> <span class="st">"exprs"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="imcdatasets_files/figure-html/usage-cell-1.png" width="700"></p>
<p><strong>Outlining cells on images</strong></p>
<p>Cell information can be displayed on top of images by combining the
<code>images</code>, <code>masks</code> and <code>sce</code>
objects.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/cytomapper/man/plotPixels.html" class="external-link">plotPixels</a></span><span class="op">(</span></span>
<span>    <span class="va">cur_images</span>, mask <span class="op">=</span> <span class="va">cur_masks</span>, object <span class="op">=</span> <span class="va">sce</span>,</span>
<span>    img_id <span class="op">=</span> <span class="st">"image_number"</span>, cell_id <span class="op">=</span> <span class="st">"cell_number"</span>,</span>
<span>    outline_by <span class="op">=</span> <span class="st">"cell_type"</span>,</span>
<span>    colour_by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CD8a"</span>, <span class="st">"CD68"</span>, <span class="st">"CDH1"</span><span class="op">)</span>,</span>
<span>    bcg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        CD8a  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>        CD68 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span>        CDH1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="imcdatasets_files/figure-html/usage-outline-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="session-info">Session info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<pre><code><span><span class="co">## R Under development (unstable) (2022-11-18 r83369)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">## Running under: Ubuntu 20.04.5 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/local/lib/R/lib/libRblas.so</span></span>
<span><span class="co">## LAPACK: /usr/local/lib/R/lib/libRlapack.so</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: Etc/UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats4    stats     graphics  grDevices utils     datasets  methods  </span></span>
<span><span class="co">## [8] base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">##  [1] imcdatasets_1.7.2           SpatialExperiment_1.9.3    </span></span>
<span><span class="co">##  [3] cytomapper_1.11.1           EBImage_4.41.1             </span></span>
<span><span class="co">##  [5] SingleCellExperiment_1.21.0 SummarizedExperiment_1.29.1</span></span>
<span><span class="co">##  [7] Biobase_2.59.0              GenomicRanges_1.51.4       </span></span>
<span><span class="co">##  [9] GenomeInfoDb_1.35.13        IRanges_2.33.0             </span></span>
<span><span class="co">## [11] S4Vectors_0.37.3            BiocGenerics_0.45.0        </span></span>
<span><span class="co">## [13] MatrixGenerics_1.11.0       matrixStats_0.63.0         </span></span>
<span><span class="co">## [15] BiocStyle_2.27.1           </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##   [1] RColorBrewer_1.1-3            rstudioapi_0.14              </span></span>
<span><span class="co">##   [3] jsonlite_1.8.4                magrittr_2.0.3               </span></span>
<span><span class="co">##   [5] ggbeeswarm_0.7.1              magick_2.7.3                 </span></span>
<span><span class="co">##   [7] rmarkdown_2.20                fs_1.6.0                     </span></span>
<span><span class="co">##   [9] zlibbioc_1.45.0               ragg_1.2.5                   </span></span>
<span><span class="co">##  [11] vctrs_0.5.2                   memoise_2.0.1                </span></span>
<span><span class="co">##  [13] DelayedMatrixStats_1.21.0     RCurl_1.98-1.9               </span></span>
<span><span class="co">##  [15] terra_1.7-3                   svgPanZoom_0.3.4             </span></span>
<span><span class="co">##  [17] htmltools_0.5.4               curl_5.0.0                   </span></span>
<span><span class="co">##  [19] AnnotationHub_3.7.0           raster_3.6-14                </span></span>
<span><span class="co">##  [21] Rhdf5lib_1.21.0               rhdf5_2.43.0                 </span></span>
<span><span class="co">##  [23] sass_0.4.5                    bslib_0.4.2                  </span></span>
<span><span class="co">##  [25] htmlwidgets_1.6.1             desc_1.4.2                   </span></span>
<span><span class="co">##  [27] cachem_1.0.6                  mime_0.12                    </span></span>
<span><span class="co">##  [29] lifecycle_1.0.3               pkgconfig_2.0.3              </span></span>
<span><span class="co">##  [31] Matrix_1.5-3                  R6_2.5.1                     </span></span>
<span><span class="co">##  [33] fastmap_1.1.0                 GenomeInfoDbData_1.2.9       </span></span>
<span><span class="co">##  [35] shiny_1.7.4                   digest_0.6.31                </span></span>
<span><span class="co">##  [37] colorspace_2.1-0              AnnotationDbi_1.61.0         </span></span>
<span><span class="co">##  [39] rprojroot_2.0.3               dqrng_0.3.0                  </span></span>
<span><span class="co">##  [41] ExperimentHub_2.7.0           textshaping_0.3.6            </span></span>
<span><span class="co">##  [43] RSQLite_2.2.20                beachmat_2.15.0              </span></span>
<span><span class="co">##  [45] filelock_1.0.2                fansi_1.0.4                  </span></span>
<span><span class="co">##  [47] nnls_1.4                      httr_1.4.4                   </span></span>
<span><span class="co">##  [49] abind_1.4-5                   compiler_4.3.0               </span></span>
<span><span class="co">##  [51] withr_2.5.0                   bit64_4.0.5                  </span></span>
<span><span class="co">##  [53] tiff_0.1-11                   BiocParallel_1.33.9          </span></span>
<span><span class="co">##  [55] viridis_0.6.2                 DBI_1.1.3                    </span></span>
<span><span class="co">##  [57] highr_0.10                    HDF5Array_1.27.0             </span></span>
<span><span class="co">##  [59] R.utils_2.12.2                rappdirs_0.3.3               </span></span>
<span><span class="co">##  [61] DelayedArray_0.25.0           rjson_0.2.21                 </span></span>
<span><span class="co">##  [63] tools_4.3.0                   vipor_0.4.5                  </span></span>
<span><span class="co">##  [65] interactiveDisplayBase_1.37.0 beeswarm_0.4.0               </span></span>
<span><span class="co">##  [67] httpuv_1.6.8                  R.oo_1.25.0                  </span></span>
<span><span class="co">##  [69] glue_1.6.2                    rhdf5filters_1.11.0          </span></span>
<span><span class="co">##  [71] promises_1.2.0.1              grid_4.3.0                   </span></span>
<span><span class="co">##  [73] generics_0.1.3                gtable_0.3.1                 </span></span>
<span><span class="co">##  [75] R.methodsS3_1.8.2             sp_1.6-0                     </span></span>
<span><span class="co">##  [77] utf8_1.2.2                    XVector_0.39.0               </span></span>
<span><span class="co">##  [79] BiocVersion_3.17.1            pillar_1.8.1                 </span></span>
<span><span class="co">##  [81] stringr_1.5.0                 limma_3.55.2                 </span></span>
<span><span class="co">##  [83] later_1.3.0                   dplyr_1.0.10                 </span></span>
<span><span class="co">##  [85] BiocFileCache_2.7.1           lattice_0.20-45              </span></span>
<span><span class="co">##  [87] bit_4.0.5                     tidyselect_1.2.0             </span></span>
<span><span class="co">##  [89] locfit_1.5-9.7                Biostrings_2.67.0            </span></span>
<span><span class="co">##  [91] scuttle_1.9.4                 knitr_1.41                   </span></span>
<span><span class="co">##  [93] gridExtra_2.3                 bookdown_0.32                </span></span>
<span><span class="co">##  [95] edgeR_3.41.2                  svglite_2.1.1                </span></span>
<span><span class="co">##  [97] xfun_0.36                     shinydashboard_0.7.2         </span></span>
<span><span class="co">##  [99] DropletUtils_1.19.2           stringi_1.7.12               </span></span>
<span><span class="co">## [101] fftwtools_0.9-11              yaml_2.3.7                   </span></span>
<span><span class="co">## [103] evaluate_0.20                 codetools_0.2-18             </span></span>
<span><span class="co">## [105] tibble_3.1.8                  BiocManager_1.30.19          </span></span>
<span><span class="co">## [107] cli_3.6.0                     xtable_1.8-4                 </span></span>
<span><span class="co">## [109] systemfonts_1.0.4             munsell_0.5.0                </span></span>
<span><span class="co">## [111] jquerylib_0.1.4               Rcpp_1.0.10                  </span></span>
<span><span class="co">## [113] dbplyr_2.3.0                  png_0.1-8                    </span></span>
<span><span class="co">## [115] parallel_4.3.0                ellipsis_0.3.2               </span></span>
<span><span class="co">## [117] pkgdown_2.0.7                 ggplot2_3.4.0                </span></span>
<span><span class="co">## [119] assertthat_0.2.1              blob_1.2.3                   </span></span>
<span><span class="co">## [121] jpeg_0.1-10                   sparseMatrixStats_1.11.1     </span></span>
<span><span class="co">## [123] bitops_1.0-7                  viridisLite_0.4.1            </span></span>
<span><span class="co">## [125] scales_1.2.1                  crayon_1.5.2                 </span></span>
<span><span class="co">## [127] purrr_1.0.1                   rlang_1.0.6                  </span></span>
<span><span class="co">## [129] KEGGREST_1.39.0</span></span></code></pre>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Damond-2019-Pancreas" class="csl-entry">
Damond, N., S. Engler, V. R. T. Zanotelli, D. Schapiro, C. H.
Wasserfall, I. Kusmartseva, H. S. Nick, et al. 2019. <span>“A Map of
Human Type 1 Diabetes Progression by Imaging Mass Cytometry.”</span>
<em>Cell Metab.</em> 29 (3): 755–768.e5.
</div>
<div id="ref-Giesen-2014-IMC" class="csl-entry">
Giesen, C., H. A. O. Wang, D. Schapiro, N. Zivanovic, A. Jacobs, B.
Hattendorf, P. J. Schüffler, et al. 2014. <span>“Highly Multiplexed
Imaging of Tumor Tissues with Subcellular Resolution by Mass
Cytometry.”</span> <em>Nat. Methods</em> 11 (4): 417–22.
</div>
<div id="ref-JacksonFischer-2020-BreastCancer" class="csl-entry">
Jackson, H. W., J. R. Fischer, V. R. T. Zanotelli, R. H. Ali, R.
Mechera, S. D. Soysal, H. Moch, et al. 2020. <span>“The Single-Cell
Pathology Landscape of Breast Cancer.”</span> <em>Nature</em> 578
(7796): 615–20.
</div>
<div id="ref-Zanotelli-2020-Spheroids" class="csl-entry">
Zanotelli, V. R. T., M. Leutenegger, X. K. Lun, F. Georgi, N. de Souza,
and B. Bodenmiller. 2020. <span>“A Quantitative Analysis of the
Interplay of Environment, Neighborhood, and Cell State in 3d
Spheroids.”</span> <em>Mol Syst Biol</em> 16 (12): e9798.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicolas Damond.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
